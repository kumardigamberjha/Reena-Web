{% extends 'Pages/editpage.html' %}


{% block content %}
{% load widget_tweaks %}
<section class="home-section bg-light">
    <div class="home-content">
        <i class="bx bx-menu" style="color: rgb(0, 0, 0)"></i>
        <h1 style="color: rgb(0, 0, 0)" class="ms-4 mt-2"></h1>
    </div>

    <div class="container" style="">
        <h1>Add New Page</h1>
        <form method="post" action="" enctype="multipart/form-data">
            {% csrf_token %}
            <div id="extra-fields"></div>
            <input type="text" name="name" class="form-control" placeholder="hello">
            {% render_field form2.content style="width: 100%; height: 100%; padding: 12px 20px; box-sizing: border-box; border: 2px solid #ccc; border-radius: 4px; background-color: #fff; font-size: 16px; resize: none;"|add_class:"form-control" %}

            <button id="add-more-btn" type="button">Add More</button>
            <button type="submit">Save</button>
        </form>
        {{ form2.media }}
    </div>


    <!-- add_item.html -->
    <!-- add_item.html -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            var addButton = $('#add-more-btn');
            var fieldWrapper = $('#extra-fields');

            var fieldHTML = '<div><input type="text" name="name[]"></div>';
            var maxFields = 10; // Maximum number of extra fields

            var x = 1; // Initial field counter
            $(addButton).click(function () {
                if (x < maxFields) {
                    x++;
                    $(fieldWrapper).append(fieldHTML);
                }
            });

            $('form').submit(function (e) {
                e.preventDefault(); // Prevent default form submission
                var formData = $(this).serialize();

                $.ajax({
                    type: 'POST',
                    url: $(this).attr('action'),
                    data: formData,
                    success: function (response) {
                        // Handle success response if needed
                    },
                    error: function (xhr, errmsg, err) {
                        // Handle error response if needed
                    }
                });
            });
        });
    </script>

<script>
    let arrow = document.querySelectorAll(".arrow");
    for (var i = 0; i < arrow.length; i++) {
        arrow[i].addEventListener("click", (e) => {
            let arrowParent = e.target.parentElement.parentElement; //selecting main parent of arrow
            arrowParent.classList.toggle("showMenu");
        });
    }

    let sidebar = document.querySelector(".sidebar");
    let sidebarBtn = document.querySelector(".bx-menu");
    console.log(sidebarBtn);
    sidebarBtn.addEventListener("click", () => {
        sidebar.classList.toggle("close");
    });
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
    crossorigin="anonymous"></script>

    {% endblock content %}