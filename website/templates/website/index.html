<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Reena.uk</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous" />

  <!--jquery-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
    integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  {% block csslink %}
  {% load static %}
  <link href="{% static 'css/body.css' %}" rel="stylesheet" />
  {% endblock csslink %}
  <!--time-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <link rel="stylesheet" type="text/css" href="https://npmcdn.com/flatpickr/dist/themes/dark.css">


  <!--aos-->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
  <!--fontawesome-->
  <script src="https://kit.fontawesome.com/8feaa5fbd6.js" crossorigin="anonymous"></script>
  <!--css-->
  <link href="{% static 'css/index.css' %}" rel="stylesheet" />

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">

  <!-- Latest compiled and minified JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
  
  <!-- (Optional) Latest compiled and minified JavaScript translation files -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/i18n/defaults-*.min.js"></script>

  <style>
    #paypal-button-container {
      display: none;
    }
  </style>

</head>

{% block body %}

<body>
  {% endblock body %}

  <div class="header fixed-top">
    <div class="container-fluid bg-secondary" style="height: 2em">
      <div class="row">
        <div class="col-sm-6 mx-auto">
          <div class="contact mt-1 mx-auto">
            <div class="number">
              <i class="fa-solid fa-phone mt-1 mx-1" style="color: lightcoral;"></i>
              07969385877
            </div>
            <span class="line mx-2">|</span>
            <div class="email">
              <i class="fa-solid fa-envelope mt-1 mx-1" style="color: lightcoral;"></i>
              reenavirdee@hotmail.com
            </div>
          </div>
        </div>
        <div class="col-sm-5"></div>
        <div class="col-sm-1">
          <div class="socials mt-1 mx-auto">
            <div class="instagram">
              <a href="#"><i class="fa-brands fa-instagram mx-2"></i></a>
            </div>
            <div class="facebook">
              <a href="https://www.facebook.com/ReenasHairAndBeauty/"><i class="fa-brands fa-facebook"></i></a>
            </div>
          </div>
        </div>
      </div>
    </div>


    <nav class="navbar navbar-expand-lg bg-light">
      <div class="container-fluid">
        <a class="navbar-brand mx-3" href="/"><img src="{% static 'images/a2.png' %}" class="img-fluid" /></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="/">Home</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                aria-expanded="false">
                Treatments
              </a>
              <ul class="dropdown-menu">
                <li>
                  <a class="dropdown-item" href="{% url 'dermalogica' %}">Dermalogica Treatments</a>
                </li>
                <li><a class="dropdown-item" href="{% url 'caciview' %}">CACI Synergy</a></li>
                <li>
                  <a class="dropdown-item" href="{% url 'iplview' %}">Elight IPL / SHR Hair Removal Treatments</a>
                </li>
                <li><a class="dropdown-item" href="{% url 'waxingview' %}">Waxing</a></li>
                <li><a class="dropdown-item" href="{% url 'nailextview' %}">Nail Extension</a></li>
                <li><a class="dropdown-item" href="{% url 'bridalview' %}">Make Up</a></li>
                <li><a class="dropdown-item" href="{% url 'tintingview' %}">Tinting</a></li>
                <li><a class="dropdown-item" href="{% url 'earpview' %}">Ear Piercing</a></li>
                <li><a class="dropdown-item" href="{% url 'electroview' %}">Electrolysis</a></li>
                <li>
                  <a class="dropdown-item" href="{% url 'manicureview' %}">Manicure & Pedicure</a>
                </li>
                <li>
                  <a class="dropdown-item" href="{% url 'massageview' %}">Massage</a>
                </li>
              </ul>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'pricing' %}">Pricelist</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'aboutus' %}">About Us</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'contactus' %}">Contact</a>
            </li>
          </ul>
          <hr />
          <div class="conatiner text-center">
            <button class="btn-1 text-center" data-bs-toggle="modal" data-bs-target="#bookingmodal">
              <i class="fa-solid fa-calendar mx-2"></i>Book Now
            </button>
          </div>
        </div>
      </div>
    </nav>
  </div>


  <div class="modal mt-5" id="bookingmodal" aria-hidden="true">
    <div class="container bg-secondary mx-auto"
      style="width: 80%; padding: 1em 1em 1em; border: 0.4rem solid white; border-radius: 16px; ">
      <div class="row g-3">
        <div class="col-sm-12">
          <div class="container text-center">
            <!-- <h1>Book Your Appointment</h1> -->
          </div>
          <form action="" method="POST" id="bookingform">
            {% csrf_token %}
            <div class="row">
              <div class="col-md-6">
                <label for="name" class="form-label mt-3 text-center"
                  style="color: white; font-size: 20px; font-weight: 500; "><i class="fa-solid fa-person mx-2"
                    style="color: lightcoral;"></i>Your
                  Name</label>
                <input type="text" id="name" name="name" class="form-control" style="border: 1px solid lightcoral"
                  required>
              </div>
              <div class="col-md-6" id="phonecon">
                <label for="phone" class="form-label mt-3 text-center"
                  style="color: white; font-size: 20px; font-weight: 500; "><i class="fa-solid fa-address-book mx-2"
                    style="color: lightcoral; font-size: 1.2rem; font-weight: 600; "></i>Phone</label>
                <input type="text" name="phone" id="phone" class="form-control" style="border: 1px solid lightcoral"
                  required>
                <input type="hidden" name="hidname" value="{{user.username}}">
              </div>
            </div>

            <div class="container mt-2" id="id_servicescon">
              <p class="form-label mt-3" style="color: white; font-size: 20px; font-weight: 500; text-align: left; "><i class="fa-solid fa-spa mx-2" style="color: lightcoral;"></i>Search For Multiple Service</p>
              <select name="services" id="id_services" class="form-control p-2" multiple="multiple"
                style="border: 1px solid lightcoral; width: 100%; padding-bottom: 20px; ">
                {% for i in data %}
                <option value="{{i.id}}">{{i.name}} - &#163;{{i.price}}</option>
                {% endfor %}
              </select>
              <input type="hidden" id="total_amount"></input>
              <input type="hidden" name="total_payment" id="total_payment"></input>
            </div>

            <div class="container mb-3" id="datentimecon">
              <label for="datetime-local" class="form-label mt-3"
                style="color: white; font-size: 20px; font-weight: 500;"><i class="fa-solid fa-calendar-days mx-2"
                  style="color: lightcoral;"></i>Select Date and Time</label>
              <input type="datetime-local" class="form-control border-dark" required name="datentime" id="datentime"
                placeholder="Select Date and Time"
                style="border-radius:5px; border: 2px solid lightcoral; text-align: center ; width: 100%;">
              <div class="container text-center mt-3">
                <input type="text" name="" id="timeslot"
                  style="text-align: center; border: none; margin-top: 5px; background-color: transparent; pointer-events: none;" />
              </div>
            </div>

            <input type="hidden" name="payment_status" id="paymentstatus">

            <!-- <div id="paypal-button-container"></div> -->
            <div id="paypal-button-container" style="width: 50%; margin:auto; margin-bottom: 25px;"></div>
            <script
              src="https://www.paypal.com/sdk/js?client-id=AWFL7YRuIbPx-nbOh0-l8K8yxbOKsaaIzjSC4NMMJEcR3el2R0hEjF26UrosJAx7f9R-QQEXMgb_LT7u&currency=USD"></script>

            <script>

              paypal.Buttons({
                // Sets up the transaction when a payment button is clicked
                createOrder: (data, actions) => {
                  var amountt = document.getElementById("total_amount").value;
                  return actions.order.create({
                    purchase_units: [{
                      amount: {
                        value: amountt // Can also reference a variable or function
                      }
                    }]
                  });
                },
                // Finalize the transaction after payer approval
                onApprove: (data, actions) => {
                  let amounttt = document.getElementById("total_amount").value;

                  return actions.order.capture().then(function (orderData) {
                    console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));
                    const transaction = orderData.purchase_units[0].payments.captures[0];
                    alert(`Payment has been Done`)
                    $('#paymentstatus').val("PaymentisDonecheckit");
                    $('#total_payment').val(amounttt);
                    // Listen for the payment.success event

                    submitform()
                    function submitform() {
                      alert('test');
                      document.getElementById("bookingform").submit();
                      alert("Done")
                    }
                  });
                }
              }).render('#paypal-button-container');
            </script>

            <div class="container text-center">
              <input type="submit" value="Book" name="code" id="submitBtn" class="button mt-3" style="display: none;">
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <div class="footer mb-2">
    <p></p>
  </div>

  {% if messages %}
  <ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }} p-2 mb-2 bg-success text-white"
      style="list-style: none; border-radius: 10px; width: 95%; margin: auto auto;" {% endif %}>{{ message }}</li>
      {% endfor %}
  </ul>
  {% endif %}
  {% block content %}
  <div class="main mx-auto">
    <div class="box mt-5" data-aos="fade-up" data-aos-duration="3000">
      <img src="{% static 'images/f1 (1).jpeg' %}" class="img-1 mt-5 img-fluid" style="max-width: 100%; width: 100%;" />
      <div class="container-fluid mx-auto">
        <h1 class="up mx-auto mt-2" style="color: black;">Welcome To Reena's Spa & Salon.</h1>
        {% if not user.is_authenticated %}
        <a href="{% url 'login' %}"><button class="button mx-auto mt-5" type="button">Login</button></a>
        {% else %}
        <a href="{% url 'logout' %}"><button class="button mx-auto mt-5" type="button">Logout</button></a>
        {% endif %}
      </div>
    </div>



    <div class="box" data-aos="fade-up" data-aos-duration="3000">
      <img src="{% static 'images/f1 (2).jpeg' %}" class="img-2 img-fluid" style="width: 100%" />
      <div class="container mx-auto">
        <h1 class="centered mx-auto">
          Always Make Room for Beauty in Your Life.
        </h1>
        <button class="button mx-auto mt-5" data-bs-toggle="modal" data-bs-target="#bookingmodal">
          <i class="fa-solid fa-calendar mx-2"></i>Book Now
        </button>
      </div>
    </div>

    <div class="box" data-aos="fade-up" data-aos-duration="3000">
      <img src="{% static 'images/f1 (3).jpeg' %}" class="img-3 img-fluid" style="width: 100%" />
      <div class="container mx-auto">
        <h1 class="right mx-auto">Relax, Enjoy and Love Yourself.</h1>
        <a href="{% url 'aboutus' %}"><button class="button mx-auto mt-5" type="button">About Us</button></a>
      </div>
    </div>

    <div class="box" data-aos="fade-up" data-aos-duration="3000">
      <img src="{% static 'images/f4.jpeg' %}" class="img-4 img-fluid" style="width: 100%" />
      <div class="container mx-auto">
        <h1 class="left mx-auto mb-5">Rewards</h1>
        <a href="{% url 'rewards' %}"><button class="button mx-auto mt-5" type="button">
            Find Out More
          </button></a>
      </div>
    </div>
  </div>
  {% endblock content %}

  {% block footer %}
  <!--footer-->
  <section class="section bg-black">
    <footer class="footer theme-bg-black">
      <div class="container-fluid mx-auto py-1 mt-3">
        <div class="row">
          <div class="col-sm-4">
            <h4 class="col-heading" style="margin-left: 31px">
              Opening Hours
            </h4>
            <ul class="ul" style="text-align: left">
              <p>Monday: Closed</p>
              <p>Tuesday: 10am - 6pm</p>
              <p>Wednesday: 10am - 6pm</p>
              <p>Thursday: 10am - 6pm</p>
              <p>Friday: 10am - 6pm</p>
              <p>Saturday: 10am - 6pm</p>
              <p>Sunday: Closed</p>
            </ul>
          </div>
          <div class="col-sm-3 mx-auto">
            <h4 class="col-heading mt-0" style="margin-left: 31px">
              Reena's
            </h4>
            <ul class="ul" style="text-align: left">
              <li>
                <a href="#" class="nav-link mb-2" style="font-size: 1.2em">Home</a>
              </li>
              <li>
                <a href="#" class="nav-link mb-2" style="font-size: 1.2em">About Us</a>
              </li>
              <li>
                <a href="#" class="nav-link mb-2" style="font-size: 1.2em">Services</a>
              </li>
              <li>
                <a href="#" class="nav-link mb-2" style="font-size: 1.2em">Pricing</a>
              </li>
              <li>
                <a href="#" class="nav-link mb-2" style="font-size: 1.2em">Contact Us</a>
              </li>
            </ul>
          </div>

          <div class="col-sm-5 mx-auto">
            <h4 class="col-heading mt-1" style="margin-left: 31px">
              Contact Us
            </h4>
            <p style="margin-left: 33px">
              Our Salon Is Situated in Teddington, London.
            </p>
            <p style="margin-left: 33px">
              Feel Free to Visit Us, Call or Book an Appointment!
            </p>
            <div class="container-fluid">
              <div class="row g-3">
                <div class="col-sm-12" style="margin-left: 20px">
                  <i class="fa-solid fa-location-pin mx-1"></i>
                  <p style="display: inline; text-align: center">
                    207 Waldegrave Road, Teddington, TW11 8LX
                  </p>
                </div>
                <div class="col-sm-12" style="margin-left: 20px">
                  <i class="fa-solid fa-envelope mx-1"></i>
                  <p style="display: inline">reenavirdee@hotmail.com</p>
                </div>
                <div class="col-sm-12 mb-3" style="margin-left: 20px">
                  <i class="fa-solid fa-phone mx-2"></i>
                  <p style="display: inline">07969385877</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <hr style="border: 2px solid white" />
        <div class="container-fluid mx-auto text-center mb-5">
          <div class="row">
            <div class="col-sm-6 mt-3">
              <p style="font-size: 1.5em; font-weight: 600">Visit Us Here!</p>
              <div class="map-responsive">
                <iframe
                  src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2487.391926902979!2d-0.34093818481731963!3d51.43259582399166!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x48760c82e87c8f89%3A0x2cbb42bc02982b9c!2sReena&#39;s%20Hair%20and%20Beauty%20Salon!5e0!3m2!1sen!2sin!4v1669811046699!5m2!1sen!2sin"
                  width="600" height="450" frameborder="0" style="border: 0" allowfullscreen="" aria-hidden="false"
                  tabindex="0"></iframe>
              </div>
            </div>
            <div class="col-sm-6 mt-3 text-center">
              <p style="font-size: 1.5em; font-weight: 600">Follow Us</p>
              <iframe
                src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2FReenasHairAndBeauty%2F&tabs=timeline&width=340&height=500&small_header=false&adapt_container_width=true&hide_cover=false&show_facepile=true&appId"
                width="340" height="500"
                style="border: none; overflow: hidden; box-shadow: 2px 2px 50px 8px lightblue; padding: 1em 1em 1em;"
                scrolling="no" frameborder="0" allowfullscreen="true"
                allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"></iframe>
            </div>
          </div>
        </div>

        <hr style="border: 2px solid white" />

        <div class="container-fluid">
          <div class="row">
            <div class="col-sm-4 mt-3">
              <p>All Rights Reserved</p>
            </div>
            <div class="col-sm-4 mx-auto"></div>
          </div>
        </div>
      </div>
    </footer>
  </section>
  {% endblock footer %}
  <!--javascript-->
  <script src="{% static 'javascript/body.js' %}"></script>
  <!--js-->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <!--js-->
  <script>
    AOS.init();
  </script>
  <!-- JavaScript Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"></script>


  <script>

    document.getElementById("modalclose").addEventListener("click", function () {
      $('#bookingmodal').style.display="none";
    });
  </script>


  <script>
    $('#id_services').change(function () {
      let x = $('#id_services').val()
      $("#contactnumber").attr("autocomplete", "off");

      console.log("C: ", x)
      console.log("HEllo Coding")
      $.ajax({
        type: 'GET',
        url: "{% url 'get_booking_price' %}",
        data: { 'services': x },
        success: function (data) {
          var instance = JSON.parse(data["amount"]);
          console.log(instance)
          $('#total_amount').val(instance);
          console.log("Done");
        },
        error: function (response) {
          // alert the error if any error occured
          alert(response["responseJSON"]["error"]);
        }
      })
    })


    // ################## CHECK FOR TIME AND DATE

    $('#datentime').change(function () {
      let x = $('#datentime').val()

      console.log("C: ", x)
      $.ajax({
        type: 'POST',
        url: "{% url 'get_booking_datentime' %}",
        data: { 'datentime': x, 'csrfmiddlewaretoken': "{{csrf_token}}" },
        success: function (data) {
          console.log(data['amount'])
          $('#timeslot').val(data['amount']);
          console.log("Done");
          let valueofinp = document.getElementById('timeslot').value
          console.log("Value: ", valueofinp)
          if (valueofinp == "Ready To Go") {
            $('#paypal-button-container').css('display', 'block')
          }
          else {
            $('#paypal-button-container').css('display', 'none')

          }
        },
        error: function (error) {

        }
      })
    })


    // Booking Model AJAX CALL 
    $(document).on('submit', '#bookingform', function (event) {
      event.preventDefault();
      let x = $('#bookingform')
      let serv = $('#id_services').val()
      console.log(serv)
      $.ajax({
        type: 'POST',
        url: "{% url 'add_booking' %}",
        data: x.serialize(),

        success: function (data) {
          console.log("Done");
          window.location = "/"
        },
        error: function (error) {
          alert("There is some error")
          var instance = JSON.parse(data["error"]);
          alert(instance)
          console.log("error: ", error)
        }
      })
    })

    $('#id_services').selectpicker();

  </script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>


  <script>
    config = {
      enableTime: true,
      dateFormat: "Y-m-d H:i",
      minDate: "today",
      minTime: "10:00",
      maxTime: "18:00",
      inline: false,
      minuteIncrement: 30,

      "disable": [
        function (date) {
          return (date.getDay() === 0 || date.getDay() === 1);
        }
      ],
      "locale": {
        "firstDayOfWeek": 2 // start week on Monday
      }
    }
    flatpickr("input[type=datetime-local]", config);
  </script>

</body>

</html>